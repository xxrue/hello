<!doctype html>
<html lang="ms">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Operasi Set: Persilangan Set</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100%;
      width: 100%;
    }
    
    .main-wrapper {
      width: 100%;
      min-height: 100%;
      padding: 32px 24px;
    }
    
    .content-container {
      max-width: 1000px;
      margin: 0 auto;
    }
    
    header {
      text-align: center;
      margin-bottom: 32px;
    }
    
    h1 {
      color: #ffffff;
      font-size: 36px;
      margin: 0 0 12px 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    
    .instruction {
      color: #f0f0f0;
      font-size: 18px;
      margin: 0;
    }
    
    .controls-panel {
      background: white;
      border-radius: 16px;
      padding: 28px;
      margin-bottom: 32px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    }
    
    .legend {
      margin-bottom: 24px;
      padding: 16px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    
    .legend h3 {
      margin: 0 0 12px 0;
      font-size: 18px;
      color: #333;
    }
    
    .legend p {
      margin: 6px 0;
      font-size: 15px;
      color: #555;
    }
    
    .expression-builder {
      display: flex;
      gap: 12px;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 24px;
    }
    
    select {
      padding: 10px 14px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 18px;
      font-weight: 600;
      background: white;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 80px;
    }
    
    select:hover {
      border-color: #667eea;
    }
    
    select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .button-group {
      display: flex;
      gap: 16px;
      margin-top: 8px;
    }
    
    button {
      flex: 1;
      padding: 14px 28px;
      font-size: 16px;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .btn-show {
      background: #667eea;
      color: white;
    }
    
    .btn-show:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }
    
    .btn-reset {
      background: #f0f0f0;
      color: #333;
    }
    
    .btn-reset:hover {
      background: #e0e0e0;
      transform: translateY(-2px);
    }
    
    .venn-container {
      background: white;
      border-radius: 16px;
      padding: 48px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 500px;
    }
    
    svg {
      max-width: 100%;
      height: auto;
    }
    
    .set-circle {
      fill: none;
      stroke: #333;
      stroke-width: 3;
      transition: all 0.5s ease;
    }
    
    .set-label {
      font-size: 24px;
      font-weight: bold;
      fill: #333;
    }
    
    .highlight {
      fill-opacity: 0.5;
      transition: all 0.5s ease;
    }
    
    @media (max-width: 768px) {
      h1 {
        font-size: 28px;
      }
      
      .instruction {
        font-size: 16px;
      }
      
      .control-row {
        flex-direction: column;
      }
      
      .button-group {
        flex-direction: column;
      }
      
      .venn-container {
        padding: 24px;
        min-height: 400px;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="main-wrapper">
   <div class="content-container">
    <header>
     <h1 id="main-title">Operasi Set: Persilangan Set</h1>
     <p class="instruction" id="instruction-text">Pilih operasi untuk setiap set dan klik 'Tunjukkan Hasil' untuk melihat persilangan</p>
    </header>
    <div class="controls-panel">
     <div class="legend">
      <h3>Set Semesta (ξ) mengandungi: Set A, Set B, dan Set C</h3>
      <p><strong>∩</strong> = Simbol Persilangan (Intersection)</p>
      <p><strong>∪</strong> = Simbol Kesatuan (Union)</p>
     </div>
     <div class="expression-builder"><select id="setA"> <option value="A">A</option> <option value="A'">A'</option> </select> <select id="operator1"> <option value="∩">∩</option> <option value="∪">∪</option> </select> <select id="setB"> <option value="B">B</option> <option value="B'">B'</option> </select> <select id="operator2"> <option value="∩">∩</option> <option value="∪">∪</option> </select> <select id="setC"> <option value="C">C</option> <option value="C'">C'</option> </select>
     </div>
     <div class="button-group"><button class="btn-show" id="showBtn">Tunjukkan Hasil</button> <button class="btn-reset" id="resetBtn">Set Semula</button>
     </div>
    </div>
    <div class="venn-container">
     <svg viewbox="0 0 600 450" id="vennDiagram"><!-- Background rectangle for universal set --> <rect x="50" y="50" width="500" height="350" fill="none" stroke="#999" stroke-width="2" stroke-dasharray="5,5" /> <!-- Define clip paths for intersection regions --> <defs>
       <clippath id="clipA">
        <circle cx="230" cy="190" r="100" />
       </clippath>
       <clippath id="clipB">
        <circle cx="370" cy="190" r="100" />
       </clippath>
       <clippath id="clipC">
        <circle cx="300" cy="290" r="100" />
       </clippath>
      </defs> <!-- Highlight regions (will be filled based on selection) --> <g id="highlights"><!-- Region: Outside all sets -->
       <rect id="region-outside" x="50" y="50" width="500" height="350" class="highlight" fill="#9ca3af" /> <!-- Region: Only A (A without B and C) -->
       <path id="region-A-only" class="highlight" fill="#ff6b6b" d="" /> <!-- Region: Only B (B without A and C) -->
       <path id="region-B-only" class="highlight" fill="#4ecdc4" d="" /> <!-- Region: Only C (C without A and B) -->
       <path id="region-C-only" class="highlight" fill="#ffb347" d="" /> <!-- Region: A ∩ B (but not C) -->
       <path id="region-AB" class="highlight" fill="#c779d0" d="" /> <!-- Region: A ∩ C (but not B) -->
       <path id="region-AC" class="highlight" fill="#fab1a0" d="" /> <!-- Region: B ∩ C (but not A) -->
       <path id="region-BC" class="highlight" fill="#a3e4d7" d="" /> <!-- Region: A ∩ B ∩ C (all three) -->
       <path id="region-ABC" class="highlight" fill="#9c88ff" d="" />
      </g> <!-- Set circles (drawn on top) --> <circle cx="230" cy="190" r="100" class="set-circle" stroke="#FF6B6B" /> <circle cx="370" cy="190" r="100" class="set-circle" stroke="#4ECDC4" /> <circle cx="300" cy="290" r="100" class="set-circle" stroke="#FFB347" /> <!-- Set labels --> <text x="170" y="130" class="set-label" fill="#FF6B6B">
       A
      </text> <text x="420" y="130" class="set-label" fill="#4ECDC4">
       B
      </text> <text x="290" y="380" class="set-label" fill="#FFB347">
       C
      </text> <!-- Universal set label --> <text x="520" y="70" font-size="18" fill="#999">
       ξ
      </text>
     </svg>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      main_title: "Operasi Set: Persilangan Set",
      instruction_text: "Pilih operasi untuk setiap set dan klik 'Tunjukkan Hasil' untuk melihat persilangan",
      show_button: "Tunjukkan Hasil",
      reset_button: "Set Semula"
    };

    async function onConfigChange(config) {
      const titleElement = document.getElementById('main-title');
      const instructionElement = document.getElementById('instruction-text');
      const showBtnElement = document.getElementById('showBtn');
      const resetBtnElement = document.getElementById('resetBtn');
      
      if (titleElement) {
        titleElement.textContent = config.main_title || defaultConfig.main_title;
      }
      if (instructionElement) {
        instructionElement.textContent = config.instruction_text || defaultConfig.instruction_text;
      }
      if (showBtnElement) {
        showBtnElement.textContent = config.show_button || defaultConfig.show_button;
      }
      if (resetBtnElement) {
        resetBtnElement.textContent = config.reset_button || defaultConfig.reset_button;
      }
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ["main_title", config.main_title || defaultConfig.main_title],
        ["instruction_text", config.instruction_text || defaultConfig.instruction_text],
        ["show_button", config.show_button || defaultConfig.show_button],
        ["reset_button", config.reset_button || defaultConfig.reset_button]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    // Venn diagram logic
    const setASelect = document.getElementById('setA');
    const setBSelect = document.getElementById('setB');
    const setCSelect = document.getElementById('setC');
    const operator1Select = document.getElementById('operator1');
    const operator2Select = document.getElementById('operator2');
    const showBtn = document.getElementById('showBtn');
    const resetBtn = document.getElementById('resetBtn');

    // Define all regions
    const regions = {
      'A-only': ['region-A-only'],
      'B-only': ['region-B-only'],
      'C-only': ['region-C-only'],
      'AB': ['region-AB'],
      'AC': ['region-AC'],
      'BC': ['region-BC'],
      'ABC': ['region-ABC'],
      'outside': ['region-outside']
    };

    function resetHighlights() {
      Object.values(regions).forEach(regionIds => {
        regionIds.forEach(id => {
          const element = document.getElementById(id);
          if (element) {
            element.style.fillOpacity = '0';
          }
        });
      });
    }

    function drawVennRegions() {
      // Calculate intersection points and paths for accurate Venn diagram regions
      const cx1 = 230, cy1 = 190, r = 100; // Circle A
      const cx2 = 370, cy2 = 190; // Circle B
      const cx3 = 300, cy3 = 290; // Circle C
      
      // Region A only (A - B - C)
      const regionAOnly = document.getElementById('region-A-only');
      regionAOnly.setAttribute('d', `M 230 90 A 100 100 0 0 1 330 190 A 100 100 0 0 1 270 260 A 100 100 0 0 1 190 260 A 100 100 0 0 1 130 190 A 100 100 0 0 1 230 90 Z`);
      
      // Region B only (B - A - C)
      const regionBOnly = document.getElementById('region-B-only');
      regionBOnly.setAttribute('d', `M 370 90 A 100 100 0 0 1 470 190 A 100 100 0 0 1 410 260 A 100 100 0 0 1 330 260 A 100 100 0 0 1 270 190 A 100 100 0 0 1 370 90 Z`);
      
      // Region C only (C - A - B)
      const regionCOnly = document.getElementById('region-C-only');
      regionCOnly.setAttribute('d', `M 300 190 A 100 100 0 0 1 400 290 A 100 100 0 0 1 300 390 A 100 100 0 0 1 200 290 A 100 100 0 0 1 300 190 Z`);
      
      // Region A ∩ B (not C)
      const regionAB = document.getElementById('region-AB');
      regionAB.setAttribute('d', `M 300 150 A 70 70 0 0 1 330 190 A 70 70 0 0 1 300 230 A 70 70 0 0 1 270 190 A 70 70 0 0 1 300 150 Z`);
      
      // Region A ∩ C (not B)
      const regionAC = document.getElementById('region-AC');
      regionAC.setAttribute('d', `M 250 220 A 60 60 0 0 1 290 250 A 60 60 0 0 1 250 280 A 60 60 0 0 1 210 250 A 60 60 0 0 1 250 220 Z`);
      
      // Region B ∩ C (not A)
      const regionBC = document.getElementById('region-BC');
      regionBC.setAttribute('d', `M 350 220 A 60 60 0 0 1 390 250 A 60 60 0 0 1 350 280 A 60 60 0 0 1 310 250 A 60 60 0 0 1 350 220 Z`);
      
      // Region A ∩ B ∩ C (all three)
      const regionABC = document.getElementById('region-ABC');
      regionABC.setAttribute('d', `M 300 220 A 30 30 0 0 1 330 240 A 30 30 0 0 1 300 260 A 30 30 0 0 1 270 240 A 30 30 0 0 1 300 220 Z`);
    }

    function highlightRegions(regionsToHighlight) {
      resetHighlights();
      regionsToHighlight.forEach(regionKey => {
        if (regions[regionKey]) {
          regions[regionKey].forEach(id => {
            const element = document.getElementById(id);
            if (element) {
              element.style.fillOpacity = '0.65';
            }
          });
        }
      });
    }

    function getSetRegions(setName, complement = false) {
      if (complement) {
        // Return all regions except the specified set
        switch(setName) {
          case 'A':
            return ['B-only', 'C-only', 'BC', 'outside'];
          case 'B':
            return ['A-only', 'C-only', 'AC', 'outside'];
          case 'C':
            return ['A-only', 'B-only', 'AB', 'outside'];
        }
      } else {
        // Return regions containing the set
        switch(setName) {
          case 'A':
            return ['A-only', 'AB', 'AC', 'ABC'];
          case 'B':
            return ['B-only', 'AB', 'BC', 'ABC'];
          case 'C':
            return ['C-only', 'AC', 'BC', 'ABC'];
        }
      }
      return [];
    }
    
    // Initialize regions on page load
    drawVennRegions();

    function intersectRegions(regions1, regions2) {
      return regions1.filter(r => regions2.includes(r));
    }

    function unionRegions(regions1, regions2) {
      return [...new Set([...regions1, ...regions2])];
    }

    showBtn.addEventListener('click', () => {
      const setAValue = setASelect.value;
      const setBValue = setBSelect.value;
      const setCValue = setCSelect.value;
      const op1Value = operator1Select.value;
      const op2Value = operator2Select.value;

      // Get regions for first set
      const setAComplement = setAValue.includes("'");
      const regionsA = getSetRegions('A', setAComplement);

      // Get regions for second set
      const setBComplement = setBValue.includes("'");
      const regionsB = getSetRegions('B', setBComplement);

      // Apply first operation
      let resultRegions;
      if (op1Value === '∩') {
        resultRegions = intersectRegions(regionsA, regionsB);
      } else {
        resultRegions = unionRegions(regionsA, regionsB);
      }

      // Apply second operation with set C
      const setCComplement = setCValue.includes("'");
      const regionsC = getSetRegions('C', setCComplement);
      
      if (op2Value === '∩') {
        resultRegions = intersectRegions(resultRegions, regionsC);
      } else {
        resultRegions = unionRegions(resultRegions, regionsC);
      }

      highlightRegions(resultRegions);
    });

    resetBtn.addEventListener('click', () => {
      setASelect.value = 'A';
      setBSelect.value = 'B';
      setCSelect.value = 'C';
      operator1Select.value = '∩';
      operator2Select.value = '∩';
      resetHighlights();
    });
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a92dba92723c7bd',t:'MTc2NDkzMDUyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
