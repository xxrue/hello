<!doctype html>
<html lang="ms">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kad Imbas Teknologi Pembuatan</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      height: 100%;
      overflow: hidden;
    }
    
    html {
      height: 100%;
    }
    
    * {
      box-sizing: border-box;
    }

    .main-wrapper {
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #1a4d2e 0%, #2d5f3f 50%, #1e3a2a 100%);
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
    }

    /* Decorative background */
    .bg-decoration {
      position: absolute;
      border-radius: 50%;
      opacity: 0.08;
      pointer-events: none;
    }

    .deco-1 {
      width: 500px;
      height: 500px;
      background: radial-gradient(circle, #4ade80 0%, transparent 70%);
      top: -250px;
      left: -200px;
    }

    .deco-2 {
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, #22d3ee 0%, transparent 70%);
      bottom: -200px;
      right: -150px;
    }

    /* Header */
    .app-header {
      text-align: center;
      padding: 30px 20px 20px;
      position: relative;
      z-index: 10;
    }

    .app-title {
      font-size: 28px;
      font-weight: 700;
      color: #ffffff;
      margin: 0 0 10px 0;
      text-shadow: 0 2px 20px rgba(134, 239, 172, 0.5);
    }

    .app-subtitle {
      font-size: 16px;
      color: #a7f3d0;
      margin: 0;
      font-weight: 600;
    }

    /* Main content area - scrollable */
    .content-wrapper {
      flex: 1;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
      z-index: 10;
      padding: 0 20px 30px;
    }

    .content-wrapper::-webkit-scrollbar {
      width: 10px;
    }

    .content-wrapper::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.1);
    }

    .content-wrapper::-webkit-scrollbar-thumb {
      background: rgba(167, 243, 208, 0.4);
      border-radius: 5px;
    }

    .content-wrapper::-webkit-scrollbar-thumb:hover {
      background: rgba(167, 243, 208, 0.6);
    }

    /* Screens */
    .screen {
      display: none;
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px 0;
    }

    .screen.active {
      display: block;
    }

    /* Menu */
    .menu-grid {
      display: grid;
      gap: 25px;
      max-width: 600px;
      margin: 0 auto;
    }

    .menu-card {
      background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(167,243,208,0.85) 100%);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 30px;
      display: flex;
      align-items: center;
      gap: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid rgba(134, 239, 172, 0.3);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .menu-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 12px 35px rgba(134, 239, 172, 0.3);
    }

    .menu-icon {
      font-size: 60px;
      line-height: 1;
    }

    .menu-text h3 {
      margin: 0 0 8px 0;
      font-size: 22px;
      font-weight: 700;
      color: #1a4d2e;
    }

    .menu-text p {
      margin: 0;
      font-size: 14px;
      color: #2d5f3f;
      line-height: 1.5;
    }

    /* Notes Grid */
    .notes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 30px;
      margin-bottom: 30px;
    }

    /* Flashcard */
    .flashcard-container {
      perspective: 1500px;
      height: 550px;
    }

    .flashcard {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.7s;
      transform-style: preserve-3d;
      cursor: pointer;
    }

    .flashcard.is-flipped {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 25px;
      background: linear-gradient(135deg, rgba(255,255,255,0.98) 0%, rgba(240,253,244,0.95) 100%);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(134, 239, 172, 0.3);
      box-shadow: 0 10px 35px rgba(0,0,0,0.2);
      padding: 35px;
      overflow: hidden;
    }

    .card-face.front {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    .card-face.back {
      transform: rotateY(180deg);
      overflow-y: auto;
      padding-top: 30px;
    }

    .card-face.back::-webkit-scrollbar {
      width: 8px;
    }

    .card-face.back::-webkit-scrollbar-track {
      background: rgba(74, 222, 128, 0.1);
      border-radius: 10px;
      margin: 10px 0;
    }

    .card-face.back::-webkit-scrollbar-thumb {
      background: rgba(74, 222, 128, 0.4);
      border-radius: 10px;
    }

    .card-emoji {
      font-size: 80px;
      margin-bottom: 20px;
    }

    .card-heading {
      font-size: 26px;
      font-weight: 700;
      color: #1a4d2e;
      margin: 0 0 15px 0;
    }

    .card-hint {
      font-size: 14px;
      color: #666;
      font-style: italic;
      margin-top: 15px;
    }

    .card-back-content h3 {
      font-size: 22px;
      font-weight: 700;
      color: #1a4d2e;
      margin: 0 0 20px 0;
    }

    .card-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .card-list li {
      padding: 14px 18px;
      margin-bottom: 12px;
      background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(220,252,231,0.7) 100%);
      border-radius: 12px;
      border-left: 4px solid #4ade80;
      font-size: 15px;
      line-height: 1.6;
      color: #1e3a2a;
      transition: transform 0.2s ease;
    }

    .card-list li:hover {
      transform: translateX(5px);
    }

    .card-list li strong {
      color: #1a4d2e;
      font-weight: 600;
    }

    /* Quiz */
    .quiz-info {
      background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(167,243,208,0.85) 100%);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 25px;
      margin-bottom: 30px;
      border: 2px solid rgba(134, 239, 172, 0.3);
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }

    .quiz-info h3 {
      margin: 0 0 15px 0;
      font-size: 20px;
      font-weight: 700;
      color: #1a4d2e;
    }

    .quiz-info p {
      margin: 10px 0;
      font-size: 15px;
      line-height: 1.6;
      color: #1e3a2a;
    }

    .quiz-info strong {
      color: #1a4d2e;
      font-weight: 600;
    }

    .quiz-card-wrapper {
      position: relative;
      height: 380px;
      margin-bottom: 30px;
      max-width: 650px;
      margin-left: auto;
      margin-right: auto;
      perspective: 1500px;
    }

    .quiz-card {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.8s cubic-bezier(0.4, 0.0, 0.2, 1);
      transform-style: preserve-3d;
      cursor: pointer;
      transform: rotateY(0deg);
    }

    .quiz-card.is-flipped {
      transform: rotateY(180deg);
    }

    .quiz-card-face {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      background: white;
      backdrop-filter: blur(10px);
      border-radius: 25px;
      border: 2px solid rgba(134, 239, 172, 0.4);
      box-shadow: 0 12px 35px rgba(0,0,0,0.2);
      padding: 40px 30px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .quiz-card-face.front {
      transform: rotateY(0deg);
    }

    .quiz-card-face.back {
      transform: rotateY(180deg);
    }

    .quiz-card-face.front::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 50%;
      height: 100%;
      background: rgba(99, 102, 241, 0.15);
      pointer-events: none;
      z-index: 1;
    }

    .quiz-card-face.front::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 50%;
      height: 100%;
      background: rgba(74, 222, 128, 0.15);
      pointer-events: none;
      z-index: 1;
    }

    .quiz-card-face > * {
      position: relative;
      z-index: 2;
    }

    .quiz-card.swipe-out-left {
      transform: translateX(-150%) rotate(-25deg);
      opacity: 0;
    }

    .quiz-card.swipe-out-right {
      transform: translateX(150%) rotate(25deg);
      opacity: 0;
    }

    .quiz-front {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 100%;
    }

    .quiz-back {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 100%;
    }

    .quiz-counter {
      position: absolute;
      top: 20px;
      right: 20px;
      background: linear-gradient(135deg, #4ade80 0%, #22d3ee 100%);
      color: white;
      padding: 10px 18px;
      border-radius: 25px;
      font-size: 14px;
      font-weight: 700;
      box-shadow: 0 4px 12px rgba(74, 222, 128, 0.3);
    }

    .quiz-question {
      font-size: 19px;
      line-height: 1.7;
      color: #000000;
      font-weight: 600;
      padding: 0 10px;
      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
    }

    .quiz-indicators {
      display: none;
    }

    .quiz-indicator {
      display: none;
    }

    .result-emoji {
      font-size: 70px;
      margin-bottom: 15px;
    }

    .result-title {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 15px;
    }

    .result-title.correct {
      color: #22c55e;
    }

    .result-title.incorrect {
      color: #ef4444;
    }

    .result-info {
      font-size: 16px;
      color: #1e3a2a;
      line-height: 1.7;
      padding: 18px;
      background: linear-gradient(135deg, rgba(220,252,231,0.8) 0%, rgba(255,255,255,0.8) 100%);
      border-radius: 12px;
      margin-top: 10px;
      border-left: 4px solid #4ade80;
    }

    .result-info strong {
      display: block;
      margin-bottom: 8px;
      color: #1a4d2e;
      font-weight: 600;
    }

    .quiz-controls {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .quiz-btn {
      flex: 1;
      max-width: 220px;
      padding: 18px 30px;
      border: none;
      border-radius: 50px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      color: white;
    }

    .quiz-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }

    .quiz-btn.konvensional {
      background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);
    }

    .quiz-btn.moden {
      background: linear-gradient(135deg, #4ade80 0%, #22d3ee 100%);
    }

    /* Quiz Result Summary */
    .quiz-summary {
      display: none;
      background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(167,243,208,0.85) 100%);
      backdrop-filter: blur(10px);
      border-radius: 25px;
      padding: 40px;
      text-align: center;
      border: 2px solid rgba(134, 239, 172, 0.4);
      box-shadow: 0 12px 35px rgba(0,0,0,0.2);
    }

    .quiz-summary.active {
      display: block;
    }

    .quiz-summary h3 {
      font-size: 28px;
      font-weight: 700;
      color: #1a4d2e;
      margin: 0 0 20px 0;
    }

    .final-score {
      font-size: 56px;
      font-weight: bold;
      background: linear-gradient(135deg, #4ade80 0%, #22d3ee 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin: 20px 0;
    }

    .final-message {
      font-size: 18px;
      color: #1e3a2a;
      margin-bottom: 30px;
      line-height: 1.6;
    }

    .restart-btn {
      background: linear-gradient(135deg, #4ade80 0%, #22d3ee 100%);
      color: white;
      padding: 18px 50px;
      border: none;
      border-radius: 50px;
      font-size: 17px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 24px rgba(74, 222, 128, 0.3);
    }

    .restart-btn:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 10px 32px rgba(74, 222, 128, 0.5);
    }

    /* Back button */
    .back-btn {
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
      color: #a7f3d0;
      padding: 14px 35px;
      border: 2px solid rgba(167, 243, 208, 0.4);
      border-radius: 50px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 20px;
      display: inline-block;
    }

    .back-btn:hover {
      background: rgba(167, 243, 208, 0.3);
      color: white;
      border-color: rgba(167, 243, 208, 0.6);
      transform: translateY(-2px);
    }

    @media (max-width: 768px) {
      .app-title {
        font-size: 24px;
      }

      .menu-card {
        padding: 25px;
        gap: 20px;
      }

      .menu-icon {
        font-size: 50px;
      }

      .menu-text h3 {
        font-size: 19px;
      }

      .notes-grid {
        grid-template-columns: 1fr;
      }

      .flashcard-container {
        height: 500px;
      }

      .quiz-card-wrapper {
        height: 350px;
      }

      .quiz-controls {
        flex-direction: column;
      }

      .quiz-btn {
        max-width: 100%;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="main-wrapper">
   <div class="bg-decoration deco-1"></div>
   <div class="bg-decoration deco-2"></div>
   <header class="app-header">
    <h1 class="app-title" id="appTitle">Kaedah Teknologi Pembuatan Produk</h1>
    <p class="app-subtitle" id="appSubtitle"></p>
   </header>
   <div class="content-wrapper"><!-- Menu Screen -->
    <div class="screen active" id="menuScreen">
     <div class="menu-grid">
      <div class="menu-card" id="goToNotes">
       <div class="menu-icon">
        üìö
       </div>
       <div class="menu-text">
        <h3 id="notesTitle">Flashcard Nota</h3>
        <p>Belajar kaedah teknologi pembuatan secara konvensional dan moden</p>
       </div>
      </div>
      <div class="menu-card" id="goToQuiz">
       <div class="menu-icon">
        üåø
       </div>
       <div class="menu-text">
        <h3 id="quizTitle">Flashcard Kuiz</h3>
        <p>Uji pemahaman anda dengan kuiz interaktif</p>
       </div>
      </div>
     </div>
    </div><!-- Notes Screen -->
    <div class="screen" id="notesScreen">
     <div class="notes-grid"><!-- Card 1 -->
      <div class="flashcard-container">
       <div class="flashcard" id="card1">
        <div class="card-face front">
         <div class="card-emoji">
          üîß
         </div>
         <h2 class="card-heading">Kaedah Konvensional</h2>
         <p class="card-hint">Klik untuk terbalikkan kad</p>
        </div>
        <div class="card-face back">
         <div class="card-back-content">
          <h3>Kaedah Konvensional</h3>
          <ul class="card-list">
           <li>‚Ä¢ Menggunakan teknologi yang asas dan biasanya dikendalikan oleh individu dengan menggunakan tangan</li>
           <li>‚Ä¢ Memerlukan kemahiran individu untuk menghasilkan produk</li>
           <li>‚Ä¢ Jenis produk yang dihasilkan adalah terhad dan memerlukan masa yang lama untuk disiapkan</li>
           <li><strong>Contoh:</strong></li>
           <li>- Memutar skru menggunakan pemutar skru</li>
           <li>- Meratakan permukaan kayu menggunakan ketam kayu</li>
           <li>- Mengecat menggunakan berus cat</li>
          </ul>
         </div>
        </div>
       </div>
      </div><!-- Card 2 -->
      <div class="flashcard-container">
       <div class="flashcard" id="card2">
        <div class="card-face front">
         <div class="card-emoji">
          ‚öôÔ∏è
         </div>
         <h2 class="card-heading">Kaedah Moden</h2>
         <p class="card-hint">Klik untuk terbalikkan kad</p>
        </div>
        <div class="card-face back">
         <div class="card-back-content">
          <h3>Kaedah Moden</h3>
          <ul class="card-list">
           <li>‚Ä¢ Dapat menjimatkan masa, kos dan bahan</li>
           <li>‚Ä¢ Penggunaan mesin menggantikan penggunaan alatan tangan</li>
           <li>‚Ä¢ Individu dapat menjalankan banyak tugas yang berlainan dalam masa yang sama (multitasking)</li>
           <li><strong>Contoh:</strong></li>
           <li>- Memutar skru menggunakan pemutar skru tanpa wayar</li>
           <li>- Melicinkan permukaan kayu menggunakan mesin pelelas</li>
           <li>- Mengecat menggunakan mesin penyembur cat</li>
          </ul>
         </div>
        </div>
       </div>
      </div>
     </div><button class="back-btn" id="backFromNotes"><span id="backText1">‚Üê Kembali</span></button>
    </div><!-- Quiz Screen -->
    <div class="screen" id="quizScreen">
     <div class="quiz-info">
      <h3>üìã Arahan Kuiz</h3>
      <p><strong>Klik sebelah kiri kad (üîµ)</strong> jika pernyataan adalah <strong>Kaedah Konvensional</strong></p>
      <p><strong>Klik sebelah kanan kad (üü¢)</strong> jika pernyataan adalah <strong>Kaedah Moden</strong></p>
     </div>
     <div id="quizActive">
      <div class="quiz-card-wrapper" id="quizCardArea"></div>
      <p style="text-align: center; color: #a7f3d0; font-size: 15px; margin-top: 20px; font-weight: 500;">Klik sebelah biru untuk Konvensional, klik sebelah hijau untuk Moden</p>
     </div>
     <div class="quiz-summary" id="quizSummary">
      <h3>üéâ Tahniah!</h3>
      <p class="final-message">Anda telah selesai kuiz</p>
      <div class="final-score" id="displayScore">
       0/12
      </div>
      <p class="final-message" id="displayMessage"></p><button class="restart-btn" id="restartQuiz">üîÑ Cuba Lagi</button>
     </div><button class="back-btn" id="backFromQuiz"><span id="backText2">‚Üê Kembali</span></button>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      main_title: "Kaedah Teknologi Pembuatan Produk",
      notes_button: "Flashcard Nota",
      quiz_button: "Flashcard Kuiz",
      back_button: "Kembali",
      background_color: "#1a4d2e",
      surface_color: "#ffffff",
      text_color: "#1e3a2a",
      primary_action_color: "#4ade80",
      secondary_action_color: "#22d3ee",
      font_family: "Inter",
      font_size: 16
    };

    const QUIZ_QUESTIONS = [
      { text: "Menggunakan teknologi yang asas dan biasanya dikendalikan oleh individu dengan menggunakan tangan", answer: "left" },
      { text: "Dapat menjimatkan masa, kos dan bahan", answer: "right" },
      { text: "Memerlukan kemahiran individu untuk menghasilkan produk", answer: "left" },
      { text: "Penggunaan mesin menggantikan penggunaan alatan tangan", answer: "right" },
      { text: "Jenis produk yang dihasilkan adalah terhad dan memerlukan masa yang lama untuk disiapkan", answer: "left" },
      { text: "Individu dapat menjalankan banyak tugas yang berlainan dalam masa yang sama (multitasking)", answer: "right" },
      { text: "Memutar skru menggunakan pemutar skru", answer: "left" },
      { text: "Memutar skru menggunakan pemutar skru tanpa wayar", answer: "right" },
      { text: "Meratakan permukaan kayu menggunakan ketam kayu", answer: "left" },
      { text: "Melicinkan permukaan kayu menggunakan mesin pelelas", answer: "right" },
      { text: "Mengecat menggunakan berus cat", answer: "left" },
      { text: "Mengecat menggunakan mesin penyembur cat", answer: "right" }
    ];

    // App state
    let currentScreen = 'menu';
    let quizIndex = 0;
    let quizScore = 0;
    let shuffledQuestions = [];
    let isProcessing = false;

    // Screen management
    function showScreen(screenName) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      
      if (screenName === 'menu') {
        document.getElementById('menuScreen').classList.add('active');
        document.getElementById('appSubtitle').textContent = '';
        currentScreen = 'menu';
      } else if (screenName === 'notes') {
        document.getElementById('notesScreen').classList.add('active');
        document.getElementById('appSubtitle').textContent = 'üå± Mod Pembelajaran';
        currentScreen = 'notes';
      } else if (screenName === 'quiz') {
        document.getElementById('quizScreen').classList.add('active');
        document.getElementById('appSubtitle').textContent = 'üåø Mod Kuiz';
        currentScreen = 'quiz';
        startQuiz();
      }
    }

    // Flashcard flip
    function setupFlashcards() {
      document.getElementById('card1').addEventListener('click', function() {
        this.classList.toggle('is-flipped');
      });
      document.getElementById('card2').addEventListener('click', function() {
        this.classList.toggle('is-flipped');
      });
    }

    // Quiz functions
    function shuffleArray(arr) {
      const result = [...arr];
      for (let i = result.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [result[i], result[j]] = [result[j], result[i]];
      }
      return result;
    }

    function startQuiz() {
      shuffledQuestions = shuffleArray(QUIZ_QUESTIONS);
      quizIndex = 0;
      quizScore = 0;
      isProcessing = false;
      document.getElementById('quizActive').style.display = 'block';
      document.getElementById('quizSummary').classList.remove('active');
      renderQuizCard();
    }

    function renderQuizCard() {
      const container = document.getElementById('quizCardArea');
      container.innerHTML = '';

      if (quizIndex >= shuffledQuestions.length) {
        showQuizSummary();
        return;
      }

      const question = shuffledQuestions[quizIndex];
      const card = document.createElement('div');
      card.className = 'quiz-card';
      card.innerHTML = `
        <div class="quiz-card-face front">
          <div class="quiz-counter">${quizIndex + 1} / ${shuffledQuestions.length}</div>
          <div class="quiz-front">
            <p class="quiz-question">${question.text}</p>
          </div>
        </div>
        <div class="quiz-card-face back">
          <div class="quiz-back">
            <div class="result-emoji"></div>
            <div class="result-title"></div>
            <div class="result-info"></div>
          </div>
        </div>
      `;

      const frontFace = card.querySelector('.quiz-card-face.front');
      frontFace.addEventListener('click', function(e) {
        if (isProcessing || card.classList.contains('is-flipped')) return;
        const rect = frontFace.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const half = rect.width / 2;
        answerQuestion(clickX < half ? 'left' : 'right');
      });

      container.appendChild(card);
    }

    function answerQuestion(userAnswer) {
      if (isProcessing) return;
      isProcessing = true;

      const card = document.querySelector('.quiz-card');
      const question = shuffledQuestions[quizIndex];
      const isCorrect = userAnswer === question.answer;

      if (isCorrect) quizScore++;

      // Flip the card to show result
      card.classList.add('is-flipped');
      
      const emoji = card.querySelector('.result-emoji');
      const title = card.querySelector('.result-title');
      const info = card.querySelector('.result-info');

      if (isCorrect) {
        emoji.textContent = '‚úÖ';
        title.textContent = 'Betul!';
        title.className = 'result-title correct';
        info.innerHTML = '<strong>Jawapan anda tepat!</strong>';
      } else {
        emoji.textContent = '‚ùå';
        title.textContent = 'Tidak Tepat';
        title.className = 'result-title incorrect';
        const correctMethod = question.answer === 'left' ? 'Kaedah Konvensional üîµ' : 'Kaedah Moden üü¢';
        info.innerHTML = `<strong>Jawapan yang betul:</strong> ${correctMethod}`;
      }

      setTimeout(() => {
        card.classList.add(userAnswer === 'left' ? 'swipe-out-left' : 'swipe-out-right');
        setTimeout(() => {
          quizIndex++;
          isProcessing = false;
          renderQuizCard();
        }, 400);
      }, 2000);
    }

    function showQuizSummary() {
      document.getElementById('quizActive').style.display = 'none';
      document.getElementById('quizSummary').classList.add('active');
      
      const percent = (quizScore / shuffledQuestions.length) * 100;
      document.getElementById('displayScore').textContent = `${quizScore}/${shuffledQuestions.length}`;
      
      let msg = '';
      if (percent === 100) msg = 'Cemerlang! Anda menguasai topik ini!   ';
      else if (percent >= 80) msg = 'Bagus sekali! Teruskan usaha! üëè';
      else if (percent >= 60) msg = 'Baik! Cuba lagi untuk skor lebih tinggi! üí™';
      else msg = 'Terus berusaha! Ulang nota dan cuba lagi! üìö';
      
      document.getElementById('displayMessage').textContent = msg;
    }

    // Event listeners
    document.getElementById('goToNotes').addEventListener('click', () => showScreen('notes'));
    document.getElementById('goToQuiz').addEventListener('click', () => showScreen('quiz'));
    document.getElementById('backFromNotes').addEventListener('click', () => showScreen('menu'));
    document.getElementById('backFromQuiz').addEventListener('click', () => showScreen('menu'));
    document.getElementById('restartQuiz').addEventListener('click', startQuiz);

    setupFlashcards();

    // Element SDK
    async function onConfigChange(config) {
      const font = config.font_family || defaultConfig.font_family;
      const size = config.font_size || defaultConfig.font_size;
      const bgColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;

      document.body.style.fontFamily = `${font}, system-ui, sans-serif`;
      document.body.style.fontSize = `${size}px`;
      document.querySelector('.main-wrapper').style.background = `linear-gradient(135deg, ${bgColor} 0%, ${bgColor}dd 50%, ${bgColor}aa 100%)`;

      document.getElementById('appTitle').textContent = config.main_title || defaultConfig.main_title;
      document.getElementById('appTitle').style.fontSize = `${size * 1.75}px`;
      
      document.getElementById('notesTitle').textContent = config.notes_button || defaultConfig.notes_button;
      document.getElementById('quizTitle').textContent = config.quiz_button || defaultConfig.quiz_button;
      document.getElementById('backText1').textContent = `‚Üê ${config.back_button || defaultConfig.back_button}`;
      document.getElementById('backText2').textContent = `‚Üê ${config.back_button || defaultConfig.back_button}`;

      const menuCards = document.querySelectorAll('.menu-card');
      menuCards.forEach(c => {
        c.style.background = `linear-gradient(135deg, ${surfaceColor}f2 0%, ${surfaceColor}e0 100%)`;
      });

      const cardFaces = document.querySelectorAll('.card-face');
      cardFaces.forEach(f => {
        f.style.background = `linear-gradient(135deg, ${surfaceColor}fa 0%, ${surfaceColor}f0 100%)`;
      });

      document.querySelectorAll('.card-heading, .card-back-content h3, .menu-text h3, .quiz-info h3').forEach(el => {
        el.style.color = textColor;
      });

      document.querySelectorAll('.card-list li').forEach(li => {
        li.style.borderLeftColor = primaryColor;
      });

      document.querySelectorAll('.quiz-btn.moden, .restart-btn').forEach(btn => {
        btn.style.background = `linear-gradient(135deg, ${primaryColor} 0%, ${secondaryColor} 100%)`;
      });
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (v) => {
                config.background_color = v;
                window.elementSdk.setConfig({ background_color: v });
              }
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (v) => {
                config.surface_color = v;
                window.elementSdk.setConfig({ surface_color: v });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (v) => {
                config.text_color = v;
                window.elementSdk.setConfig({ text_color: v });
              }
            },
            {
              get: () => config.primary_action_color || defaultConfig.primary_action_color,
              set: (v) => {
                config.primary_action_color = v;
                window.elementSdk.setConfig({ primary_action_color: v });
              }
            },
            {
              get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
              set: (v) => {
                config.secondary_action_color = v;
                window.elementSdk.setConfig({ secondary_action_color: v });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (v) => {
              config.font_family = v;
              window.elementSdk.setConfig({ font_family: v });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (v) => {
              config.font_size = v;
              window.elementSdk.setConfig({ font_size: v });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["main_title", config.main_title || defaultConfig.main_title],
          ["notes_button", config.notes_button || defaultConfig.notes_button],
          ["quiz_button", config.quiz_button || defaultConfig.quiz_button],
          ["back_button", config.back_button || defaultConfig.back_button]
        ])
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a587e1067e4ee09',t:'MTc2NDMxODUxMy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
