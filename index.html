<!doctype html>
<html lang="ms">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kuiz Kriket</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a472a 0%, #16a085 100%);
      min-height: 100%;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
    }

    * {
      box-sizing: border-box;
    }

    .app-wrapper {
      width: 100%;
      min-height: 100%;
      padding: 2rem 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 2.5rem;
      max-width: 800px;
      width: 100%;
      position: relative;
      overflow: hidden;
    }

    .cricket-icon {
      font-size: 3rem;
      text-align: center;
      margin-bottom: 1rem;
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    h1 {
      color: #1a472a;
      text-align: center;
      margin: 0 0 0.5rem 0;
      font-size: 2.5rem;
      font-weight: 700;
    }

    .subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 2rem;
      font-size: 1rem;
    }

    .welcome-screen, .quiz-screen, .results-screen {
      display: none;
      animation: fadeIn 0.5s ease-in;
    }

    .welcome-screen.active, .quiz-screen.active, .results-screen.active {
      display: block;
    }

    .quiz-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid #e0e0e0;
    }

    .cricket-icon-small {
      font-size: 1.75rem;
    }

    .quiz-title-small {
      color: #1a472a;
      margin: 0;
      font-size: 1.5rem;
      font-weight: 700;
    }

    @media (max-width: 640px) {
      .quiz-title-small {
        font-size: 1.25rem;
      }
      
      .cricket-icon-small {
        font-size: 1.5rem;
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .start-button, .submit-button, .next-button, .restart-button {
      background: #27ae60;
      color: white;
      border: none;
      padding: 1rem 2.5rem;
      font-size: 1.125rem;
      border-radius: 50px;
      cursor: pointer;
      display: block;
      margin: 2rem auto 0;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4);
    }

    .start-button:hover, .submit-button:hover, .next-button:hover, .restart-button:hover {
      background: #229954;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(39, 174, 96, 0.6);
    }

    .start-button:disabled, .submit-button:disabled, .next-button:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .progress-bar {
      background: #e0e0e0;
      height: 8px;
      border-radius: 10px;
      margin-bottom: 1.5rem;
      overflow: hidden;
    }

    .progress-fill {
      background: linear-gradient(90deg, #27ae60 0%, #16a085 100%);
      height: 100%;
      border-radius: 10px;
      transition: width 0.5s ease;
    }

    .question-counter {
      text-align: center;
      color: #27ae60;
      font-weight: 600;
      margin-bottom: 1.5rem;
      font-size: 1rem;
    }

    .question-card {
      background: #ffffff;
      padding: 2rem;
      border-radius: 15px;
      margin-bottom: 2rem;
      border-left: 5px solid #27ae60;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .question-text {
      font-size: 1.25rem;
      color: #333;
      margin-bottom: 1.5rem;
      font-weight: 600;
      line-height: 1.6;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .option {
      background: white;
      border: 2px solid #e0e0e0;
      padding: 1rem 1.5rem;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .option:hover {
      border-color: #27ae60;
      background: #e8f5e9;
      transform: translateX(5px);
    }

    .option.selected {
      background: #27ae60;
      color: white;
      border-color: #27ae60;
    }

    .option.correct {
      background: #4caf50;
      color: white;
      border-color: #4caf50;
    }

    .option.incorrect {
      background: #f44336;
      color: white;
      border-color: #f44336;
    }

    .option.disabled {
      cursor: not-allowed;
      opacity: 0.7;
    }

    .option-letter {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: #27ae60;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      flex-shrink: 0;
    }

    .option.selected .option-letter {
      background: white;
      color: #27ae60;
    }

    .option.correct .option-letter,
    .option.incorrect .option-letter {
      background: white;
      color: inherit;
    }

    .feedback {
      margin-top: 1.5rem;
      padding: 1rem;
      border-radius: 10px;
      font-weight: 600;
      text-align: center;
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .feedback.correct {
      background: #e8f5e9;
      color: #2e7d32;
    }

    .feedback.incorrect {
      background: #ffebee;
      color: #c62828;
    }

    .score-display {
      text-align: center;
      margin: 2rem 0;
    }

    .score-circle {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      background: linear-gradient(135deg, #1a472a 0%, #16a085 100%);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
      animation: scaleIn 0.5s ease;
    }

    @keyframes scaleIn {
      from { transform: scale(0); }
      to { transform: scale(1); }
    }

    .score-number {
      font-size: 3rem;
      font-weight: 700;
      line-height: 1;
    }

    .score-label {
      font-size: 1rem;
      margin-top: 0.5rem;
    }

    .performance-message {
      font-size: 1.5rem;
      color: #333;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .performance-emoji {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
    }

    @media (max-width: 640px) {
      .app-wrapper {
        padding: 1rem 0.5rem;
      }

      .container {
        padding: 1.5rem;
        border-radius: 15px;
      }

      h1 {
        font-size: 2rem;
      }

      .cricket-icon {
        font-size: 2.5rem;
      }

      .question-text {
        font-size: 1.125rem;
      }

      .option {
        padding: 0.875rem 1rem;
        font-size: 0.938rem;
      }

      .start-button, .submit-button, .next-button, .restart-button {
        padding: 0.875rem 2rem;
        font-size: 1rem;
      }

      .score-circle {
        width: 120px;
        height: 120px;
      }

      .score-number {
        font-size: 2.5rem;
      }

      .performance-message {
        font-size: 1.25rem;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <canvas id="confetti"></canvas>
  <div class="app-wrapper">
   <div class="container">
    <div class="welcome-screen active">
     <div class="cricket-icon">
      üèè
     </div>
     <h1 id="quiz-title">Kuiz Kriket</h1>
     <p class="subtitle">Uji pengetahuan anda tentang permainan kriket! 10 soalan rawak daripada 15 soalan.</p><button class="start-button" id="start-btn">Mula Kuiz</button>
    </div>
    <div class="quiz-screen">
     <div class="quiz-header">
      <div class="cricket-icon-small">
       üèè
      </div>
      <h2 class="quiz-title-small" id="quiz-title-small">Kuiz Kriket</h2>
     </div>
     <div class="progress-bar">
      <div class="progress-fill" id="progress"></div>
     </div>
     <div class="question-counter" id="counter"></div>
     <div class="question-card">
      <div class="question-text" id="question"></div>
      <div class="options" id="options"></div>
      <div id="feedback"></div>
     </div><button class="submit-button" id="submit-btn" style="display: none;">Hantar Jawapan</button> <button class="next-button" id="next-btn" style="display: none;">Soalan Seterusnya</button>
    </div>
    <div class="results-screen">
     <div class="cricket-icon">
      üèÜ
     </div>
     <h1 id="results-title">Keputusan Anda</h1>
     <div class="score-display">
      <div class="score-circle">
       <div class="score-number" id="final-score">
        0
       </div>
       <div class="score-label">
        / 10
       </div>
      </div>
      <div class="performance-emoji" id="performance-emoji"></div>
      <div class="performance-message" id="performance-message"></div>
     </div><button class="restart-button" id="restart-btn">Cuba Lagi</button>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      quiz_title: "Kuiz Kriket",
      start_button_text: "Mula Kuiz",
      submit_button_text: "Hantar Jawapan",
      next_button_text: "Soalan Seterusnya",
      restart_button_text: "Cuba Lagi",
      results_title: "Keputusan Anda",
      excellent_message: "Cemerlang! Anda menguasai kriket!",
      good_message: "Bagus! Teruskan berusaha!",
      try_again_message: "Cuba lagi! Anda boleh buat lebih baik!",
      background_color: "#1a472a",
      surface_color: "#f0f7f4",
      text_color: "#2d3436",
      primary_action_color: "#27ae60",
      secondary_action_color: "#16a085",
      font_family: "Segoe UI",
      font_size: 16
    };

    const allQuestions = [
      {
        question: "Berapa kumpulan yang terlibat dalam permainan kriket?",
        options: ["Satu kumpulan", "Dua kumpulan", "Tiga kumpulan", "Empat kumpulan"],
        correctAnswer: "Dua kumpulan"
      },
      {
        question: "Apakah peranan kumpulan pemukul dalam kriket?",
        options: ["Menangkap bola", "Memukul bola dan membuat larian", "Menjaga wiket", "Membaling bola"],
        correctAnswer: "Memukul bola dan membuat larian"
      },
      {
        question: "Antara berikut, yang manakah BUKAN kemahiran memukul dalam kriket?",
        options: ["Kemahiran menahan", "Pukulan deras", "Pukulan kilas", "Pukulan melantun"],
        correctAnswer: "Pukulan melantun"
      },
      {
        question: "Apakah tujuan pemukul melakukan larian dalam kriket?",
        options: ["Untuk bersenam", "Untuk mendapatkan skor", "Untuk memanaskan badan", "Untuk mengelak bola"],
        correctAnswer: "Untuk mendapatkan skor"
      },
      {
        question: "Berapakah larian lengkap yang dibuat apabila pemukul berlari dari wiket ke wiket yang bertentangan?",
        options: ["Setengah larian", "Satu larian", "Dua larian", "Tiga larian"],
        correctAnswer: "Satu larian"
      },
      {
        question: "Apakah yang diperlukan untuk kesempurnaan larian antara wiket?",
        options: ["Kekuatan fizikal dan ketahanan stamina", "Konsentrasi, persefahaman dan kerjasama", "Kelajuan berlari dan refleks pantas", "Teknik berlari dan koordinasi mata-kaki"],
        correctAnswer: "Konsentrasi, persefahaman dan kerjasama"
      },
      {
        question: "Berapakah jenis pegangan bola yang disebutkan dalam kemahiran boling?",
        options: ["Dua jenis", "Tiga jenis", "Empat jenis", "Lima jenis"],
        correctAnswer: "Tiga jenis"
      },
      {
        question: "Antara berikut, yang manakah BUKAN fasa dalam kemahiran boling?",
        options: ["Fasa larian", "Fasa pelepasan", "Fasa ikut lajak", "Fasa ketibaan"],
        correctAnswer: "Fasa ketibaan"
      },
      {
        question: "Apakah tujuan balingan bola oleh pemadang?",
        options: ["Untuk menghantar bola kepada pemain lain dengan cepat", "Untuk mengembalikan bola kepada penjaga wiket atau menjatuhkan wiket", "Untuk membuat balingan yang tinggi ke udara", "Untuk memadankan hala tuju bola dengan pemukul"],
        correctAnswer: "Untuk mengembalikan bola kepada penjaga wiket atau menjatuhkan wiket"
      },
      {
        question: "Kemahiran memadang melibatkan dua kemahiran utama. Apakah dua kemahiran tersebut?",
        options: ["Berlari dan melompat", "Membaling dan menangkap", "Memukul dan menahan", "Menendang dan menangkis"],
        correctAnswer: "Membaling dan menangkap"
      },
      {
        question: "Pada aras manakah pemadang boleh menangkap bola?",
        options: ["Aras buku lali sahaja", "Aras lutut dan pinggang sahaja", "Pelbagai aras termasuk buku lali, lutut, pinggang dan atas kepala", "Aras atas kepala sahaja"],
        correctAnswer: "Pelbagai aras termasuk buku lali, lutut, pinggang dan atas kepala"
      },
      {
        question: "Mengapakah kemahiran memukul bola penting dalam kriket?",
        options: ["Untuk menunjukkan teknik pegangan pemukul yang betul", "Untuk memastikan bola melepasi jarak yang mampu ditangkap lawan", "Untuk mengawal hala tuju bola ke arah pasukan sendiri", "Untuk mengelakkan bola daripada melantun terlalu tinggi"],
        correctAnswer: "Untuk memastikan bola melepasi jarak yang mampu ditangkap lawan"
      },
      {
        question: "Apakah yang perlu dilakukan oleh pemadang untuk 'mematikan' pemukul?",
        options: ["Berlari ke arah pemukul dengan pantas", "Membuat balingan yang pantas dan tepat", "Menangkap bola sebelum ia menyentuh tanah", "Menghalang pemukul daripada membuat larian"],
        correctAnswer: "Membuat balingan yang pantas dan tepat"
      },
      {
        question: "Apakah kepentingan ketinggian sudut pelepasan dalam kemahiran boling?",
        options: ["Untuk menghasilkan balingan yang lebih pantas", "Untuk memastikan bola dilepaskan tepat kepada sasaran", "Untuk mengelakkan bola daripada dilanggar pemukul", "Untuk memaksimumkan jarak balingan bola"],
        correctAnswer: "Untuk memastikan bola dilepaskan tepat kepada sasaran"
      },
      {
        question: "Di manakah pemadang boleh membaling bola?",
        options: ["Bahagian depan sahaja", "Pelbagai aras dan arah seperti sisi, atas kepala dan melantun", "Bahagian belakang sahaja", "Terus ke tanah sahaja"],
        correctAnswer: "Pelbagai aras dan arah seperti sisi, atas kepala dan melantun"
      }
    ];

    let currentQuestions = [];
    let currentQuestionIndex = 0;
    let score = 0;
    let selectedAnswer = null;
    let answered = false;

    const welcomeScreen = document.querySelector('.welcome-screen');
    const quizScreen = document.querySelector('.quiz-screen');
    const resultsScreen = document.querySelector('.results-screen');
    const startBtn = document.getElementById('start-btn');
    const submitBtn = document.getElementById('submit-btn');
    const nextBtn = document.getElementById('next-btn');
    const restartBtn = document.getElementById('restart-btn');
    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const counterEl = document.getElementById('counter');
    const progressEl = document.getElementById('progress');
    const feedbackEl = document.getElementById('feedback');
    const finalScoreEl = document.getElementById('final-score');
    const performanceMessageEl = document.getElementById('performance-message');
    const performanceEmojiEl = document.getElementById('performance-emoji');

    function shuffleArray(array) {
      const newArray = [...array];
      for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
      }
      return newArray;
    }

    function selectRandomQuestions() {
      const shuffled = shuffleArray(allQuestions);
      return shuffled.slice(0, 10);
    }

    function startQuiz() {
      currentQuestions = selectRandomQuestions();
      currentQuestionIndex = 0;
      score = 0;
      welcomeScreen.classList.remove('active');
      quizScreen.classList.add('active');
      showQuestion();
    }

    function showQuestion() {
      answered = false;
      selectedAnswer = null;
      feedbackEl.innerHTML = '';
      submitBtn.style.display = 'block';
      submitBtn.disabled = true;
      nextBtn.style.display = 'none';

      const question = currentQuestions[currentQuestionIndex];
      questionEl.textContent = question.question;
      counterEl.textContent = `Soalan ${currentQuestionIndex + 1} daripada 10`;
      progressEl.style.width = `${((currentQuestionIndex + 1) / 10) * 100}%`;

      // Shuffle options and track correct answer position
      const shuffledOptions = shuffleArray(question.options.map((opt, idx) => ({
        text: opt,
        isCorrect: opt === question.correctAnswer
      })));

      // Store correct answer index in shuffled array
      question.shuffledCorrectIndex = shuffledOptions.findIndex(opt => opt.isCorrect);

      optionsEl.innerHTML = '';
      const letters = ['A', 'B', 'C', 'D'];
      shuffledOptions.forEach((option, index) => {
        const optionDiv = document.createElement('div');
        optionDiv.className = 'option';
        optionDiv.innerHTML = `
          <div class="option-letter">${letters[index]}</div>
          <div>${option.text}</div>
        `;
        optionDiv.addEventListener('click', () => selectOption(index));
        optionsEl.appendChild(optionDiv);
      });
    }

    function selectOption(index) {
      if (answered) return;
      
      selectedAnswer = index;
      const options = optionsEl.querySelectorAll('.option');
      options.forEach((opt, idx) => {
        opt.classList.remove('selected');
        if (idx === index) {
          opt.classList.add('selected');
        }
      });
      submitBtn.disabled = false;
    }

    function submitAnswer() {
      if (selectedAnswer === null || answered) return;

      answered = true;
      const question = currentQuestions[currentQuestionIndex];
      const options = optionsEl.querySelectorAll('.option');

      options.forEach((opt, idx) => {
        opt.classList.add('disabled');
        if (idx === question.shuffledCorrectIndex) {
          opt.classList.add('correct');
        }
        if (idx === selectedAnswer && selectedAnswer !== question.shuffledCorrectIndex) {
          opt.classList.add('incorrect');
        }
      });

      if (selectedAnswer === question.shuffledCorrectIndex) {
        score++;
        feedbackEl.innerHTML = '<div class="feedback correct">‚úì Betul! Jawapan anda tepat!</div>';
      } else {
        feedbackEl.innerHTML = '<div class="feedback incorrect">‚úó Tidak tepat. Cuba lagi pada soalan seterusnya!</div>';
      }

      submitBtn.style.display = 'none';
      nextBtn.style.display = 'block';
    }

    function nextQuestion() {
      currentQuestionIndex++;
      if (currentQuestionIndex < 10) {
        showQuestion();
      } else {
        showResults();
      }
    }

    function showResults() {
      quizScreen.classList.remove('active');
      resultsScreen.classList.add('active');
      finalScoreEl.textContent = score;

      const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
      
      let message = config.try_again_message || defaultConfig.try_again_message;
      let emoji = 'üòä';

      if (score >= 8) {
        message = config.excellent_message || defaultConfig.excellent_message;
        emoji = 'üéâ';
        launchConfetti();
      } else if (score >= 5) {
        message = config.good_message || defaultConfig.good_message;
        emoji = 'üëç';
      } else {
        emoji = 'üí™';
      }

      performanceMessageEl.textContent = message;
      performanceEmojiEl.textContent = emoji;
    }

    function restartQuiz() {
      stopConfetti();
      resultsScreen.classList.remove('active');
      welcomeScreen.classList.add('active');
    }

    let confettiAnimationId = null;

    function launchConfetti() {
      // Stop any existing confetti animation
      if (confettiAnimationId) {
        cancelAnimationFrame(confettiAnimationId);
        confettiAnimationId = null;
      }

      const canvas = document.getElementById('confetti');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      const confetti = [];
      const confettiCount = 150;
      const colors = ['#27ae60', '#16a085', '#52c41a', '#2ecc71', '#1abc9c'];
      const startTime = Date.now();
      const duration = 4000; // 4 seconds

      for (let i = 0; i < confettiCount; i++) {
        confetti.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height - canvas.height,
          r: Math.random() * 6 + 4,
          d: Math.random() * confettiCount,
          color: colors[Math.floor(Math.random() * colors.length)],
          tilt: Math.floor(Math.random() * 10) - 10,
          tiltAngleIncremental: Math.random() * 0.07 + 0.05,
          tiltAngle: 0
        });
      }

      function draw() {
        const elapsed = Date.now() - startTime;
        
        // Stop animation after duration
        if (elapsed > duration) {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          confettiAnimationId = null;
          return;
        }

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        confetti.forEach((c, index) => {
          ctx.beginPath();
          ctx.lineWidth = c.r / 2;
          ctx.strokeStyle = c.color;
          ctx.moveTo(c.x + c.tilt + c.r / 4, c.y);
          ctx.lineTo(c.x + c.tilt, c.y + c.tilt + c.r / 4);
          ctx.stroke();

          c.tiltAngle += c.tiltAngleIncremental;
          c.y += (Math.cos(c.d) + 3 + c.r / 2) / 2;
          c.x += Math.sin(c.d);
          c.tilt = Math.sin(c.tiltAngle - index / 3) * 15;

          if (c.y > canvas.height) {
            confetti[index] = {
              x: Math.random() * canvas.width,
              y: -10,
              r: c.r,
              d: c.d,
              color: c.color,
              tilt: c.tilt,
              tiltAngleIncremental: c.tiltAngleIncremental,
              tiltAngle: c.tiltAngle
            };
          }
        });

        confettiAnimationId = requestAnimationFrame(draw);
      }

      draw();
    }

    function stopConfetti() {
      if (confettiAnimationId) {
        cancelAnimationFrame(confettiAnimationId);
        confettiAnimationId = null;
      }
      const canvas = document.getElementById('confetti');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    startBtn.addEventListener('click', startQuiz);
    submitBtn.addEventListener('click', submitAnswer);
    nextBtn.addEventListener('click', nextQuestion);
    restartBtn.addEventListener('click', restartQuiz);

    async function onConfigChange(config) {
      const quizTitle = config.quiz_title || defaultConfig.quiz_title;
      const startButtonText = config.start_button_text || defaultConfig.start_button_text;
      const submitButtonText = config.submit_button_text || defaultConfig.submit_button_text;
      const nextButtonText = config.next_button_text || defaultConfig.next_button_text;
      const restartButtonText = config.restart_button_text || defaultConfig.restart_button_text;
      const resultsTitle = config.results_title || defaultConfig.results_title;
      const backgroundColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryActionColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryActionColor = config.secondary_action_color || defaultConfig.secondary_action_color;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseSize = config.font_size || defaultConfig.font_size;

      document.getElementById('quiz-title').textContent = quizTitle;
      document.getElementById('quiz-title-small').textContent = quizTitle;
      document.getElementById('start-btn').textContent = startButtonText;
      document.getElementById('submit-btn').textContent = submitButtonText;
      document.getElementById('next-btn').textContent = nextButtonText;
      document.getElementById('restart-btn').textContent = restartButtonText;
      document.getElementById('results-title').textContent = resultsTitle;

      document.body.style.background = `linear-gradient(135deg, ${backgroundColor} 0%, ${secondaryActionColor} 100%)`;
      document.querySelector('.container').style.background = surfaceColor;
      
      const textElements = document.querySelectorAll('h1, .subtitle, .question-text, .performance-message');
      textElements.forEach(el => {
        el.style.color = textColor;
      });

      document.querySelectorAll('h1').forEach(el => {
        el.style.color = textColor;
      });

      document.querySelectorAll('.quiz-title-small').forEach(el => {
        el.style.color = textColor;
      });

      const buttons = document.querySelectorAll('.start-button, .submit-button, .next-button, .restart-button');
      buttons.forEach(btn => {
        btn.style.background = primaryActionColor;
        btn.style.boxShadow = `0 4px 15px ${primaryActionColor}66`;
      });

      const baseFontStack = 'Segoe UI, Tahoma, Geneva, Verdana, sans-serif';
      document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
      
      document.body.style.fontSize = `${baseSize}px`;
      document.querySelectorAll('h1').forEach(el => {
        el.style.fontSize = `${baseSize * 2.5}px`;
      });
      document.querySelectorAll('.question-text').forEach(el => {
        el.style.fontSize = `${baseSize * 1.25}px`;
      });
      document.querySelectorAll('.subtitle, .option, .question-counter').forEach(el => {
        el.style.fontSize = `${baseSize}px`;
      });
      document.querySelectorAll('.start-button, .submit-button, .next-button, .restart-button').forEach(el => {
        el.style.fontSize = `${baseSize * 1.125}px`;
      });
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => {
                config.surface_color = value;
                window.elementSdk.setConfig({ surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_action_color || defaultConfig.primary_action_color,
              set: (value) => {
                config.primary_action_color = value;
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            },
            {
              get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
              set: (value) => {
                config.secondary_action_color = value;
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["quiz_title", config.quiz_title || defaultConfig.quiz_title],
          ["start_button_text", config.start_button_text || defaultConfig.start_button_text],
          ["submit_button_text", config.submit_button_text || defaultConfig.submit_button_text],
          ["next_button_text", config.next_button_text || defaultConfig.next_button_text],
          ["restart_button_text", config.restart_button_text || defaultConfig.restart_button_text],
          ["results_title", config.results_title || defaultConfig.results_title],
          ["excellent_message", config.excellent_message || defaultConfig.excellent_message],
          ["good_message", config.good_message || defaultConfig.good_message],
          ["try_again_message", config.try_again_message || defaultConfig.try_again_message]
        ])
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a469a69d3ab4a9b',t:'MTc2NDEzMDkzMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
