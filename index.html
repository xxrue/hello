<!doctype html>
<html lang="ms">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Binary Octal Matching Game</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      height: 100%;
      width: 100%;
    }
    
    html {
      height: 100%;
      width: 100%;
    }
    
    * {
      box-sizing: border-box;
    }
    
    .game-wrapper {
      width: 100%;
      min-height: 100%;
      background: linear-gradient(135deg, #D4E9E2 0%, #A8C9BD 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 30px 20px;
    }
    
    .main-menu {
      background: white;
      border-radius: 20px;
      padding: 45px 40px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 600px;
      width: 100%;
      text-align: center;
      position: relative;
    }
    
    .language-toggle {
      display: flex;
      gap: 8px;
      background: #F7F9F8;
      padding: 6px;
      border-radius: 25px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      width: fit-content;
      margin-left: auto;
      margin-right: auto;
    }
    
    .lang-btn {
      padding: 8px 18px;
      font-size: 14px;
      font-weight: 600;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.2s;
      background: transparent;
      color: #718096;
    }
    
    .lang-btn.active {
      background: white;
      color: #2D4A3E;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    
    .lang-btn:hover:not(.active) {
      color: #2D4A3E;
    }
    
    .main-menu.hide {
      display: none;
    }
    
    .main-title {
      font-size: 32px;
      font-weight: 700;
      color: #2D4A3E;
      margin: 0 0 15px 0;
      line-height: 1.3;
    }
    
    .main-desc {
      font-size: 18px;
      color: #718096;
      margin: 0 0 30px 0;
      line-height: 1.5;
    }
    
    .instructions-box {
      background: #F7F9F8;
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 30px;
      text-align: left;
    }
    
    .instructions-heading {
      font-size: 20px;
      font-weight: 700;
      color: #2D4A3E;
      margin: 0 0 15px 0;
      text-align: center;
    }
    
    .instruction-item {
      font-size: 16px;
      color: #4a5568;
      margin: 10px 0;
      padding-left: 25px;
      position: relative;
    }
    
    .instruction-item:before {
      content: '‚úì';
      position: absolute;
      left: 0;
      color: #6B9080;
      font-weight: 700;
      font-size: 17px;
    }
    
    .level-buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .level-btn {
      padding: 18px 30px;
      font-size: 18px;
      font-weight: 600;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.2s;
      text-transform: uppercase;
      letter-spacing: 1px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.15);
    }
    
    .level-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.25);
    }
    
    .level-btn:active {
      transform: translateY(-1px);
    }
    
    .level-easy {
      background: linear-gradient(135deg, #8BB4A6 0%, #7AA396 100%);
      color: white;
    }
    
    .level-medium {
      background: linear-gradient(135deg, #5A7D70 0%, #4A6D60 100%);
      color: white;
    }
    
    .level-hard {
      background: linear-gradient(135deg, #2D4A3A 0%, #1D3A2A 100%);
      color: white;
    }
    
    .back-btn {
      background: linear-gradient(135deg, #5E9B93 0%, #4E8B83 100%);
      color: white;
      margin-top: 20px;
    }
    
    .game-view {
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 1200px;
      width: 100%;
      display: none;
    }
    
    .game-view.show {
      display: block;
    }
    
    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .level-badge {
      color: white;
      padding: 10px 25px;
      border-radius: 20px;
      font-size: 16px;
      font-weight: 700;
    }
    
    .level-badge.badge-easy {
      background: linear-gradient(135deg, #8BB4A6 0%, #7AA396 100%);
    }
    
    .level-badge.badge-medium {
      background: linear-gradient(135deg, #5A7D70 0%, #4A6D60 100%);
    }
    
    .level-badge.badge-hard {
      background: linear-gradient(135deg, #2D4A3A 0%, #1D3A2A 100%);
    }
    
    .stats-container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    
    .stat-item {
      background: #F7F9F8;
      padding: 10px 20px;
      border-radius: 10px;
      text-align: center;
      min-width: 100px;
    }
    
    .stat-label {
      font-size: 12px;
      color: #6B9080;
      text-transform: uppercase;
      margin-bottom: 3px;
      font-weight: 600;
    }
    
    .stat-value {
      font-size: 20px;
      font-weight: 700;
      color: #2D4A3E;
    }
    
    .game-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }
    
    .grid-column {
      background: #F7F9F8;
      padding: 25px;
      border-radius: 15px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .grid-title {
      font-size: 18px;
      font-weight: 700;
      color: #2D4A3E;
      text-align: center;
      margin: 0 0 20px 0;
      padding: 12px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    
    .cards-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      width: 100%;
      justify-items: center;
    }
    
    .card {
      aspect-ratio: 1;
      background: white;
      border: 3px solid #e2e8f0;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.25s;
      position: relative;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Courier New', monospace;
      font-size: 18px;
      font-weight: 700;
      box-shadow: 0 2px 10px rgba(0,0,0,0.08);
      width: 100%;
      max-width: 140px;
      height: auto;
    }
    
    .card:not(.revealed):not(.matched):hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      border-color: #cbd5e0;
    }
    
    .card:not(.revealed):not(.matched):before {
      content: '?';
      font-size: 48px;
      color: #cbd5e0;
      font-weight: 700;
    }
    
    .card.revealed {
      background: linear-gradient(135deg, #5E9B93 0%, #4E8B83 100%);
      border-color: #5E9B93;
      color: white;
    }
    
    .card.matched {
      background: linear-gradient(135deg, #6B9080 0%, #5A7D70 100%);
      border-color: #6B9080;
      color: white;
      cursor: default;
      animation: pulse 0.5s ease;
    }
    
    .card.wrong {
      background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
      border-color: #f56565;
      color: white;
      animation: shake 0.5s ease;
    }
    
    .card-value {
      opacity: 0;
      font-size: 18px;
      font-weight: 700;
      text-align: center;
      padding: 8px;
      word-break: break-word;
      line-height: 1.3;
      max-width: 100%;
      overflow-wrap: break-word;
    }
    
    .card.revealed .card-value,
    .card.matched .card-value,
    .card.wrong .card-value {
      opacity: 1;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    
    .victory-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.8);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: 20px;
    }
    
    .victory-modal.show {
      display: flex;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .victory-content {
      background: white;
      padding: 40px;
      border-radius: 20px;
      text-align: center;
      max-width: 500px;
      width: 100%;
      animation: slideUp 0.5s ease;
    }
    
    @keyframes slideUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    
    .victory-title {
      font-size: 36px;
      font-weight: 700;
      color: #2D4A3E;
      margin: 0 0 20px 0;
    }
    
    .victory-stats {
      background: #F7F9F8;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 25px;
    }
    
    .victory-stat {
      font-size: 18px;
      color: #4a5568;
      margin: 10px 0;
    }
    
    .victory-buttons {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    
    @media (max-width: 768px) {
      .main-menu {
        padding: 30px 25px;
      }
      
      .main-title {
        font-size: 24px;
      }
      
      .main-desc {
        font-size: 16px;
      }
      
      .game-view {
        padding: 20px;
      }
      
      .game-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
      
      .grid-column {
        padding: 20px 15px;
      }
      
      .cards-container {
        gap: 8px;
        grid-template-columns: repeat(3, 1fr);
      }
      
      .card {
        font-size: 16px;
        max-width: 100%;
        border-width: 2px;
      }
      
      .card:not(.revealed):not(.matched):before {
        font-size: 36px;
      }
      
      .card-value {
        font-size: 16px;
        padding: 5px;
      }
      
      .game-header {
        flex-direction: column;
        align-items: stretch;
      }
      
      .stats-container {
        justify-content: center;
      }
      
      .victory-title {
        font-size: 28px;
      }
      
      .grid-title {
        font-size: 16px;
        padding: 10px;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <main class="game-wrapper"><!-- Main Menu -->
   <section class="main-menu" id="mainMenu">
    <div class="language-toggle"><button class="lang-btn" id="langEn">ENG</button> <button class="lang-btn active" id="langBm">BM</button>
    </div>
    <h1 class="main-title" id="gameTitle">Asas Nombor Dua dan Asas Nombor Lapan</h1>
    <p class="main-desc" id="gameDesc">Permainan penukaran nombor di antara Asas Dua dan Asas Lapan</p>
    <div class="instructions-box">
     <h2 class="instructions-heading" id="instructionsTitle">üìã Arahan Permainan</h2>
     <div class="instruction-item" id="instructionText">
      Tekan satu kad Asas Nombor Dua dan satu kad Asas Nombor Lapan untuk mencari pasangan yang betul
     </div>
     <div class="instruction-item" id="instructionPairs">
      Jumlah pasangan: 6
     </div>
     <div class="instruction-item" id="instructionMatch">
      Padankan semua kad untuk menang!
     </div>
    </div>
    <div class="level-buttons"><button class="level-btn level-easy" id="easyBtn">Mudah</button> <button class="level-btn level-medium" id="mediumBtn">Sederhana</button> <button class="level-btn level-hard" id="hardBtn">Sukar</button>
    </div>
   </section><!-- Game Screen -->
   <section class="game-view" id="gameView">
    <header class="game-header">
     <div class="level-badge" id="levelBadge">
      Mudah
     </div>
     <div class="stats-container">
      <div class="stat-item">
       <div class="stat-label" id="attemptsLabel">
        Percubaan
       </div>
       <div class="stat-value" id="attempts">
        0
       </div>
      </div>
      <div class="stat-item">
       <div class="stat-label" id="matchesLabel">
        Padanan
       </div>
       <div class="stat-value">
        <span id="matches">0</span>/6
       </div>
      </div>
     </div>
    </header>
    <div class="game-grid">
     <div class="grid-column">
      <h2 class="grid-title" id="binaryTitle">Asas Dua</h2>
      <div class="cards-container" id="binaryCards"></div>
     </div>
     <div class="grid-column">
      <h2 class="grid-title" id="octalTitle">Asas Lapan</h2>
      <div class="cards-container" id="octalCards"></div>
     </div>
    </div><button class="level-btn back-btn" id="backBtn">‚Ü©Ô∏è Kembali ke Menu</button>
   </section><!-- Victory Modal -->
   <div class="victory-modal" id="victoryModal">
    <div class="victory-content">
     <h2 class="victory-title" id="victoryTitle">üéâ Tahniah!</h2>
     <div class="victory-stats">
      <div class="victory-stat" id="victoryFound">
       ‚úÖ Semua pasangan dijumpai!
      </div>
      <div class="victory-stat">
       <span id="victoryAttemptsLabel">üìä Jumlah Percubaan:</span> <strong id="finalAttempts">0</strong>
      </div>
     </div>
     <div class="victory-buttons"><button class="level-btn level-easy" id="replayBtn">üîÑ Main Lagi</button> <button class="level-btn back-btn" id="menuBtn">üìã Pilih Kesukaran Lain</button>
     </div>
    </div>
   </div>
  </main>
  <script>
    const translations = {
      en: {
        game_title: "Binary and Octal Numbers",
        game_description: "A number conversion game between Binary and Octal",
        instructions_title: "üìã Game Instructions",
        instruction_text: "Click one Binary card and one Octal card to find the correct match",
        instruction_pairs: "Total pairs: 6",
        instruction_match: "Match all cards to win!",
        easy_button: "Easy",
        medium_button: "Medium",
        hard_button: "Hard",
        back_button: "‚Ü©Ô∏è Back to Menu",
        attempts_label: "Attempts",
        matches_label: "Matches",
        binary_title: "Base Two (Binary)",
        octal_title: "Base Eight (Octal)",
        victory_title: "üéâ Congratulations!",
        victory_found: "‚úÖ All pairs found!",
        victory_attempts: "üìä Total Attempts:",
        replay_button: "üîÑ Play Again",
        menu_button: "üìã Choose Different Difficulty",
        level_easy: "Easy",
        level_medium: "Medium",
        level_hard: "Hard"
      },
      bm: {
        game_title: "Asas Nombor Dua dan Asas Nombor Lapan",
        game_description: "Permainan penukaran nombor di antara Asas Dua dan Asas Lapan",
        instructions_title: "üìã Arahan Permainan",
        instruction_text: "Tekan satu kad Asas Nombor Dua dan satu kad Asas Nombor Lapan untuk mencari pasangan yang betul",
        instruction_pairs: "Jumlah pasangan: 6",
        instruction_match: "Padankan semua kad untuk menang!",
        easy_button: "Mudah",
        medium_button: "Sederhana",
        hard_button: "Sukar",
        back_button: "‚Ü©Ô∏è Kembali ke Menu",
        attempts_label: "Percubaan",
        matches_label: "Padanan",
        binary_title: "Asas Dua",
        octal_title: "Asas Lapan",
        victory_title: "üéâ Tahniah!",
        victory_found: "‚úÖ Semua pasangan dijumpai!",
        victory_attempts: "üìä Jumlah Percubaan:",
        replay_button: "üîÑ Main Lagi",
        menu_button: "üìã Pilih Kesukaran Lain",
        level_easy: "Mudah",
        level_medium: "Sederhana",
        level_hard: "Sukar"
      }
    };

    const defaultConfig = {
      background_color: "#D4E9E2",
      secondary_surface_color: "#F7F9F8",
      text_color: "#2D4A3E",
      primary_action_color: "#6B9080",
      secondary_action_color: "#5E9B93",
      font_family: "Segoe UI",
      font_size: 16,
      game_title: "Asas Nombor Dua dan Asas Nombor Lapan",
      game_description: "Permainan penukaran nombor di antara Asas Dua dan Asas Lapan",
      instructions_title: "üìã Arahan Permainan",
      instruction_text: "Tekan satu kad Asas Nombor Dua dan satu kad Asas Nombor Lapan untuk mencari pasangan yang betul",
      easy_button: "Mudah",
      medium_button: "Sederhana",
      hard_button: "Sukar",
      back_button: "‚Ü©Ô∏è Kembali ke Menu"
    };

    // Game state
    let currentLanguage = 'bm';
    let currentLevel = 'easy';
    let selectedBinary = null;
    let selectedOctal = null;
    let attemptCount = 0;
    let matchCount = 0;
    let isProcessing = false;
    let gamePairs = [];

    const easyPairsPool = [
      { binary: '000', octal: '0' },
      { binary: '001', octal: '1' },
      { binary: '010', octal: '2' },
      { binary: '011', octal: '3' },
      { binary: '100', octal: '4' },
      { binary: '101', octal: '5' },
      { binary: '110', octal: '6' },
      { binary: '111', octal: '7' }
    ];

    const mediumPairsPool = [
      { binary: '1000', octal: '10' },
      { binary: '1001', octal: '11' },
      { binary: '1010', octal: '12' },
      { binary: '1011', octal: '13' },
      { binary: '1100', octal: '14' },
      { binary: '1101', octal: '15' },
      { binary: '1110', octal: '16' },
      { binary: '1111', octal: '17' }
    ];

    const hardPairsPool = [
      { binary: '10000', octal: '20' },
      { binary: '10001', octal: '21' },
      { binary: '10101', octal: '25' },
      { binary: '11000', octal: '30' },
      { binary: '11001', octal: '31' },
      { binary: '11010', octal: '32' },
      { binary: '11110', octal: '36' },
      { binary: '11111', octal: '37' }
    ];

    function selectRandomPairs(pool, count = 6) {
      const shuffled = shuffle([...pool]);
      return shuffled.slice(0, count);
    }

    function formatBinaryForMedium(binary) {
      return binary.match(/.{1,3}/g).join(' ');
    }

    function binaryToOctal(binary) {
      let clean = binary.replace(/\s/g, '');
      while (clean.length % 3 !== 0) {
        clean = '0' + clean;
      }
      
      const lookup = {
        '000': '0', '001': '1', '010': '2', '011': '3',
        '100': '4', '101': '5', '110': '6', '111': '7'
      };
      
      let result = '';
      for (let i = 0; i < clean.length; i += 3) {
        const chunk = clean.substr(i, 3);
        result += lookup[chunk];
      }
      
      return result.replace(/^0+/, '') || '0';
    }

    function shuffle(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    function updateLanguage(lang) {
      currentLanguage = lang;
      const t = translations[lang];
      
      // Update language toggle buttons
      document.getElementById('langEn').classList.toggle('active', lang === 'en');
      document.getElementById('langBm').classList.toggle('active', lang === 'bm');
      
      // Main menu
      document.getElementById('gameTitle').textContent = t.game_title;
      document.getElementById('gameDesc').textContent = t.game_description;
      document.getElementById('instructionsTitle').textContent = t.instructions_title;
      document.getElementById('instructionText').textContent = t.instruction_text;
      document.getElementById('instructionPairs').textContent = t.instruction_pairs;
      document.getElementById('instructionMatch').textContent = t.instruction_match;
      document.getElementById('easyBtn').textContent = t.easy_button;
      document.getElementById('mediumBtn').textContent = t.medium_button;
      document.getElementById('hardBtn').textContent = t.hard_button;
      
      // Game view
      document.querySelectorAll('.back-btn').forEach(btn => {
        btn.textContent = t.back_button;
      });
      document.getElementById('attemptsLabel').textContent = t.attempts_label;
      document.getElementById('matchesLabel').textContent = t.matches_label;
      document.getElementById('binaryTitle').textContent = t.binary_title;
      document.getElementById('octalTitle').textContent = t.octal_title;
      
      // Victory modal
      document.getElementById('victoryTitle').textContent = t.victory_title;
      document.getElementById('victoryFound').textContent = t.victory_found;
      document.getElementById('victoryAttemptsLabel').textContent = t.victory_attempts;
      document.getElementById('replayBtn').textContent = t.replay_button;
      document.getElementById('menuBtn').textContent = t.menu_button;
      
      // Update level badge if game is active
      const badge = document.getElementById('levelBadge');
      if (currentLevel === 'easy') {
        badge.textContent = t.level_easy;
      } else if (currentLevel === 'medium') {
        badge.textContent = t.level_medium;
      } else if (currentLevel === 'hard') {
        badge.textContent = t.level_hard;
      }
    }

    function startGame(level) {
      currentLevel = level;
      attemptCount = 0;
      matchCount = 0;
      selectedBinary = null;
      selectedOctal = null;
      isProcessing = false;
      
      const t = translations[currentLanguage];
      
      if (level === 'easy') {
        gamePairs = selectRandomPairs(easyPairsPool, 6);
        const badge = document.getElementById('levelBadge');
        badge.textContent = t.level_easy;
        badge.className = 'level-badge badge-easy';
      } else if (level === 'medium') {
        const selectedPairs = selectRandomPairs(mediumPairsPool, 6);
        gamePairs = selectedPairs.map(p => ({
          binary: formatBinaryForMedium(p.binary),
          octal: p.octal
        }));
        const badge = document.getElementById('levelBadge');
        badge.textContent = t.level_medium;
        badge.className = 'level-badge badge-medium';
      } else {
        gamePairs = selectRandomPairs(hardPairsPool, 6);
        const badge = document.getElementById('levelBadge');
        badge.textContent = t.level_hard;
        badge.className = 'level-badge badge-hard';
      }
      
      renderCards();
      updateStats();
      
      document.getElementById('mainMenu').classList.add('hide');
      document.getElementById('gameView').classList.add('show');
    }

    function renderCards() {
      const binaryContainer = document.getElementById('binaryCards');
      const octalContainer = document.getElementById('octalCards');
      
      binaryContainer.innerHTML = '';
      octalContainer.innerHTML = '';
      
      const shuffledBinary = shuffle(gamePairs.map((p, i) => ({ ...p, id: i })));
      const shuffledOctal = shuffle(gamePairs.map((p, i) => ({ ...p, id: i })));
      
      shuffledBinary.forEach(item => {
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.id = item.id;
        card.dataset.type = 'binary';
        card.innerHTML = `<div class="card-value">${item.binary}</div>`;
        card.addEventListener('click', () => handleCardClick(card, 'binary', item.id));
        binaryContainer.appendChild(card);
      });
      
      shuffledOctal.forEach(item => {
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.id = item.id;
        card.dataset.type = 'octal';
        card.innerHTML = `<div class="card-value">${item.octal}</div>`;
        card.addEventListener('click', () => handleCardClick(card, 'octal', item.id));
        octalContainer.appendChild(card);
      });
    }

    function handleCardClick(card, type, id) {
      if (isProcessing) return;
      if (card.classList.contains('matched')) return;
      if (card.classList.contains('revealed')) return;
      
      // Close previously selected card from same category
      if (type === 'binary' && selectedBinary) {
        selectedBinary.card.classList.remove('revealed');
      }
      if (type === 'octal' && selectedOctal) {
        selectedOctal.card.classList.remove('revealed');
      }
      
      card.classList.add('revealed');
      
      if (type === 'binary') {
        selectedBinary = { card, id };
      } else {
        selectedOctal = { card, id };
      }
      
      if (selectedBinary && selectedOctal) {
        checkMatch();
      }
    }

    function checkMatch() {
      isProcessing = true;
      attemptCount++;
      updateStats();
      
      const binaryId = selectedBinary.id;
      const octalId = selectedOctal.id;
      
      setTimeout(() => {
        if (binaryId === octalId) {
          selectedBinary.card.classList.add('matched');
          selectedOctal.card.classList.add('matched');
          matchCount++;
          updateStats();
          
          selectedBinary = null;
          selectedOctal = null;
          isProcessing = false;
          
          if (matchCount === 6) {
            setTimeout(showVictory, 500);
          }
        } else {
          selectedBinary.card.classList.add('wrong');
          selectedOctal.card.classList.add('wrong');
          
          const bCard = selectedBinary.card;
          const oCard = selectedOctal.card;
          
          setTimeout(() => {
            bCard.classList.remove('revealed', 'wrong');
            oCard.classList.remove('revealed', 'wrong');
            
            selectedBinary = null;
            selectedOctal = null;
            isProcessing = false;
          }, 1000);
        }
      }, 600);
    }

    function updateStats() {
      document.getElementById('attempts').textContent = attemptCount;
      document.getElementById('matches').textContent = matchCount;
    }

    function showVictory() {
      document.getElementById('finalAttempts').textContent = attemptCount;
      document.getElementById('victoryModal').classList.add('show');
    }

    function returnToMenu() {
      document.getElementById('mainMenu').classList.remove('hide');
      document.getElementById('gameView').classList.remove('show');
      document.getElementById('victoryModal').classList.remove('show');
    }

    document.getElementById('langEn').addEventListener('click', () => updateLanguage('en'));
    document.getElementById('langBm').addEventListener('click', () => updateLanguage('bm'));
    document.getElementById('easyBtn').addEventListener('click', () => startGame('easy'));
    document.getElementById('mediumBtn').addEventListener('click', () => startGame('medium'));
    document.getElementById('hardBtn').addEventListener('click', () => startGame('hard'));
    document.getElementById('backBtn').addEventListener('click', returnToMenu);
    document.getElementById('menuBtn').addEventListener('click', returnToMenu);
    document.getElementById('replayBtn').addEventListener('click', () => {
      document.getElementById('victoryModal').classList.remove('show');
      startGame(currentLevel);
    });

    async function onConfigChange(config) {
      const font = config.font_family || defaultConfig.font_family;
      const size = config.font_size || defaultConfig.font_size;
      const fontStack = 'Tahoma, Geneva, Verdana, sans-serif';
      
      document.body.style.fontFamily = `${font}, ${fontStack}`;
      
      document.getElementById('gameTitle').textContent = config.game_title || defaultConfig.game_title;
      document.getElementById('gameTitle').style.fontSize = `${size * 2}px`;
      document.getElementById('gameTitle').style.color = config.text_color || defaultConfig.text_color;
      
      document.getElementById('gameDesc').textContent = config.game_description || defaultConfig.game_description;
      document.getElementById('gameDesc').style.fontSize = `${size * 1.125}px`;
      
      document.getElementById('instructionsTitle').textContent = config.instructions_title || defaultConfig.instructions_title;
      document.getElementById('instructionsTitle').style.fontSize = `${size * 1.25}px`;
      document.getElementById('instructionsTitle').style.color = config.text_color || defaultConfig.text_color;
      
      document.getElementById('instructionText').textContent = config.instruction_text || defaultConfig.instruction_text;
      document.getElementById('instructionText').style.fontSize = `${size}px`;
      
      document.getElementById('easyBtn').textContent = config.easy_button || defaultConfig.easy_button;
      document.getElementById('easyBtn').style.fontSize = `${size * 1.125}px`;
      
      document.getElementById('mediumBtn').textContent = config.medium_button || defaultConfig.medium_button;
      document.getElementById('mediumBtn').style.fontSize = `${size * 1.125}px`;
      
      document.getElementById('hardBtn').textContent = config.hard_button || defaultConfig.hard_button;
      document.getElementById('hardBtn').style.fontSize = `${size * 1.125}px`;
      
      document.querySelectorAll('.back-btn').forEach(btn => {
        btn.textContent = config.back_button || defaultConfig.back_button;
        btn.style.fontSize = `${size * 1.125}px`;
      });
      
      const wrapper = document.querySelector('.game-wrapper');
      wrapper.style.background = `linear-gradient(135deg, ${config.background_color || defaultConfig.background_color} 0%, #A8C9BD 100%)`;
      
      const surfaces = document.querySelectorAll('.instructions-box, .stat-item, .grid-column, .victory-stats');
      surfaces.forEach(el => {
        el.style.backgroundColor = config.secondary_surface_color || defaultConfig.secondary_surface_color;
      });
      
      const textElements = document.querySelectorAll('.stat-label, .stat-value, .grid-title, .instruction-item');
      textElements.forEach(el => {
        el.style.color = config.text_color || defaultConfig.text_color;
      });
      
      const easyButtons = document.querySelectorAll('.level-easy');
      easyButtons.forEach(btn => {
        btn.style.background = `linear-gradient(135deg, ${config.primary_action_color || defaultConfig.primary_action_color} 0%, #5A7D70 100%)`;
      });
      
      const backButtons = document.querySelectorAll('.back-btn');
      backButtons.forEach(btn => {
        btn.style.background = `linear-gradient(135deg, ${config.secondary_action_color || defaultConfig.secondary_action_color} 0%, #4E8B83 100%)`;
      });
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.secondary_surface_color || defaultConfig.secondary_surface_color,
              set: (value) => {
                config.secondary_surface_color = value;
                window.elementSdk.setConfig({ secondary_surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_action_color || defaultConfig.primary_action_color,
              set: (value) => {
                config.primary_action_color = value;
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            },
            {
              get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
              set: (value) => {
                config.secondary_action_color = value;
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["game_title", config.game_title || defaultConfig.game_title],
          ["game_description", config.game_description || defaultConfig.game_description],
          ["instructions_title", config.instructions_title || defaultConfig.instructions_title],
          ["instruction_text", config.instruction_text || defaultConfig.instruction_text],
          ["easy_button", config.easy_button || defaultConfig.easy_button],
          ["medium_button", config.medium_button || defaultConfig.medium_button],
          ["hard_button", config.hard_button || defaultConfig.hard_button],
          ["back_button", config.back_button || defaultConfig.back_button]
        ])
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a90804cc5589103',t:'MTc2NDkwNTgwNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
